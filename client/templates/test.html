<template id="room-template">
  <style>
    h1 {
      background-color: red;
    }
  </style>
  <h1 id="room-name"></h1>
  <p style="clear:both">Volume: <span id="room-volume"></span></p>
  <p>Mute: <span id="room-mute"></span></p>
</template>

<script>
  (function() {
    var importDoc = document.currentScript.ownerDocument; // importee

    // Define and register <iot-room> template
    // that uses Shadow DOM and attributes.
    var proto = Object.create(HTMLElement.prototype);
    

    proto.createdCallback = function() {
        this.readAttributes();
      // get template in import
      var template = importDoc.querySelector('#room-template');
      //template.content.querySelector('#room-name').innerHTML = this.getAttribute("name");
        this.nameElement =template.content.querySelector('#room-name')
        this.volumeElement = template.content.querySelector('#room-volume');
        this.muteElement = template.content.querySelector('#room-mute');
        this.updateRoom();
      // import template into
      var clone = document.importNode(template.content, true);

      var root = this.createShadowRoot();
      
      root.appendChild(clone);
        
    };
     
    proto.readAttributes = function() {
		this.roomName = this.getAttribute( "name" );
		this.roomVolume = this.getAttribute( "volume" );
		this.roomMute = this.getAttribute( "mute" );
        console.log(this.roomName);
	};
      
    proto.updateRoom = function() {
        this.nameElement.innerHTML = this.roomName;
        this.volumeElement.innerHTML = this.roomVolume;
        this.muteElement.innerHTML = this.roomMute;
        console.log("update" + this.roomName);
    }

    document.registerElement('iot-room2', {prototype: proto});
  })();
</script>