<template>
    <require from="./from-now"></require>
    <section>
        <div class="event-header-container">
            <div class="location-header">
                <h1 class="location" css="animation-duration: ${events[0].bpm};
                opacity: ${events[0].opacity}; 
                background-color: hsla(${events[0].hue}, ${events[0].saturation}, ${events[0].lightness}, 1);
                ">
                ${location.Name}
                </h1>
            </div>
        </div>
        <div class="events-container">
            <div class="v-scroller">
                <div repeat.for="event of events" class="event-container ${event.track[0].album.thumbnail =='' ? 'no-cover' : ''}">
                    <div class="clearfix event ${event.track[0].album.thumbnail =='' ? 'no-cover' : ''}" css="background:
                    linear-gradient(
                        to bottom,
                        rgba(0, 0, 0, 0.4),
                        rgba(0, 0, 0, 0.2) 20%
                        ), 
                        url(${event.track[0].album.coverUrl})" click.delegate="event.toggleTrackAttributes()">
                        <div class="media">
                            <div class="media-body">
                                <h4 class="media-heading">${event.track[0].Title} <small class="lastplayed">${event.CreateDate | fromNow & signal:'tick'}</small></h4>
                                <p>${event.track[0].artist.Name}</p>
                                <div class="event-metadata" show.bind="event.viewAttributes">
                                    <p>Cover: '${event.track[0].album.coverUrl}'</p>
                                    <p>${event.track[0].album.Title}</p>
                                    <p>Danceability: ${event.track[0].audio.danceability}</p>
                                    <p>Energy: ${event.track[0].audio.energy}</p>
                                    <p>Valence (happiness): ${event.track[0].audio.valence}</p>
                                    <p>Tempo: ${event.track[0].audio.tempo}</p>
                                    <p>Acousticness: ${event.track[0].audio.acousticness}</p>
                                    <p>Instrumentalness: ${event.track[0].audio.instrumentalness}</p>
                                    <p>Speechiness: ${event.track[0].audio.speechiness}</p>
                                    <p>Liveness: ${event.track[0].audio.liveness}</p>
                                    <p>Loudness: ${event.track[0].audio.loudness}</p>
                                    <p>Key: ${event.track[0].audio.key} ${event.track[0].audio.mode} ${event.track[0].audio.loudness}dB</p>
                                    <p>Time signature: ${event.track[0].audio.time_signature}</p>
                                    <p>Duration: ${event.track[0].audio.duration}</p>
                                    <p>Echonest ${event.track[0].audio.DateChecked}</p>
                                    <p>MusicBrainz Album: ${event.track[0].artist.musicbrainzId}</p>
                                    <p>MusicBrainz Release Group: ${event.track[0].album.musicbrainzId}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="event-attributes">
                    </div>
                </div> 
            </div>        
        </div>    
    </section>
</template>